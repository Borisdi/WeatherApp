@using WeatherApiClass;
@model WeatherApiClass.ResponseWeatherList;
<tr>
        <th> <b>Current Weather Conditions </b>
</th>
    </tr>
@for (int i = 0; i < Model.cnt; i++)
{
    ResponseWeather response = Model.list[i];
<body>
    <head>
        <link rel="stylesheet" type="text/css" href="~/css/site.css">
    </head>
    
    <div id="name">
        @response.name
    </div>
       <div id="weatherdescription">
            @response.weather[0].description
            @{ String image = null;
                if (response.weather[0].description == "clear sky")
                {
                    image = "~/images/Symbols/01d.png";
                }

                if (response.weather[0].description == "few clouds")
                {
                    image = "~/images/Symbols/02d.png";
                }

                if (response.weather[0].description == "scattered clouds")
                {
                    image = "~/images/Symbols/03d.png";
                }

                if (response.weather[0].description == "broken clouds" || response.weather[0].description == "overcast clouds")
                {
                    image = "~/images/Symbols/04d.png";
                }

                // Всички събития от група 3xx - ръмеж и дъжд
                if (response.weather[0].description == "shower rain" || response.weather[0].description == "light intensity drizzle" || response.weather[0].description == "drizzle" || response.weather[0].description == "heavvy intensity drizzle" || response.weather[0].description == "shower rain" || response.weather[0].description == "light intensity drizzle rain" || response.weather[0].description == "drizzle rain" || response.weather[0].description == "heavy intensity drizzle rain" || response.weather[0].description == "shower rain and drizzle" || response.weather[0].description == "heavy shower rain and drizzle" || response.weather[0].description == "shower drizzle")
                {
                    image = "~/images/Symbols/09d.png";
                }
                // Всички събития от група 5xx - дъждове с различна интензивност
                if (response.weather[0].description == "rain" || response.weather[0].description == "light rain" || response.weather[0].description == "moderate rain" || response.weather[0].description == "heavy intensity rain" || response.weather[0].description == "very heavy rain" || response.weather[0].description == "extreme rain" || response.weather[0].description == "light shower rain" || response.weather[0].description == "shower rain" || response.weather[0].description == "heavy intensity shower rain" || response.weather[0].description == "ragged shower rain")
                {
                    image = "~/images/Symbols/10d.png";
                }
                // Всички събития от група 2xx - гръмотевична буря
                if (response.weather[0].description == "thunderstorm" || response.weather[0].description == "thunderstorm with light rain" || response.weather[0].description == "thunderstorm with heavy rain" || response.weather[0].description == "light thunderstorm" || response.weather[0].description == "thunderstorm" || response.weather[0].description == "heavy thunderstorm" || response.weather[0].description == "ragged thunderstorm" || response.weather[0].description == "thunderstorm with light drizzle" || response.weather[0].description == "thunderstorm with drizzle" || response.weather[0].description == "thunderstorm with heavy drizzle")
                {
                    image = "~/images/Symbols/11d.png";
                }
                // Всички събития от група 6xx - снеговалеж с различна интензивност
                if (response.weather[0].description == "snow" || response.weather[0].description == "freezing rain" || response.weather[0].description == "light snow" || response.weather[0].description == "heavy snow" || response.weather[0].description == "sleet" || response.weather[0].description == "shower sleet" || response.weather[0].description == "light rain and snow" || response.weather[0].description == "rain and snow" || response.weather[0].description == "light shower snow" || response.weather[0].description == "shower snow" || response.weather[0].description == "heavy shower snow")
                {
                    image = "~/images/Symbols/13d.png";
                }
                // Всички събития от група 7xx - атмосферни явления
                if (response.weather[0].description == "mist" || response.weather[0].description == "smoke" || response.weather[0].description == "haze" || response.weather[0].description == "sand, dust whirls" || response.weather[0].description == "fog" || response.weather[0].description == "sand" || response.weather[0].description == "dust" || response.weather[0].description == "volcanic ash" || response.weather[0].description == "squalls" || response.weather[0].description == "tornado")
                {
                    image = "~/images/Symbols/50d.png";
                }
            }
            <img src=@Url.Content(image) />
    </div>
    <div id="temperature">
            Temperature: @Math.Round(response.main.temp)  °C
    </div>
    <div id="wind">
            Wind: @response.wind.speed m/s
            @{
                String directiondescription = null;
                if (response.wind.deg >= 0 && response.wind.deg < 11 || response.wind.deg <= 0 && response.wind.deg > 349)
                {
                    directiondescription = "N";
                }
                if (response.wind.deg >= 11 && response.wind.deg < 34)
                {
                    directiondescription = "NNE";
                }
                if (response.wind.deg >= 34 && response.wind.deg < 56)
                {
                    directiondescription = "NE";
                }
                if (response.wind.deg >= 56 && response.wind.deg < 79)
                {
                    directiondescription = "ENE";
                }
                if (response.wind.deg >= 79 && response.wind.deg < 101)
                {
                    directiondescription = "E";
                }
                if (response.wind.deg >= 101 && response.wind.deg < 124)
                {
                    directiondescription = "ESE";
                }
                if (response.wind.deg >= 124 && response.wind.deg < 146)
                {
                    directiondescription = "SE";
                }
                if (response.wind.deg >= 146 && response.wind.deg < 169)
                {
                    directiondescription = "SSE";
                }
                if (response.wind.deg >= 169 && response.wind.deg < 191)
                {
                    directiondescription = "S";
                }
                if (response.wind.deg >= 191 && response.wind.deg < 214)
                {
                    directiondescription = "SSW";
                }
                if (response.wind.deg >= 214 && response.wind.deg < 236)
                {
                    directiondescription = "SW";
                }
                if (response.wind.deg >= 236 && response.wind.deg < 259)
                {
                    directiondescription = "WSW";
                }
                if (response.wind.deg >= 259 && response.wind.deg < 281)
                {
                    directiondescription = "W";
                }
                if (response.wind.deg >= 281 && response.wind.deg < 304)
                {
                    directiondescription = "WNW";
                }
                if (response.wind.deg >= 304 && response.wind.deg < 326)
                {
                    directiondescription = "NW";
                }
                if (response.wind.deg >= 326 && response.wind.deg < 349)
                {
                    directiondescription = "NNW";
                }
            }
            Direction: @directiondescription
    </div>
    <div id="humidity">
            Humidity: @response.main.humidity %
    </div>
    <div id="pressure">
            Pressure: @Math.Round(response.main.pressure) hPa
    </div>
    <div id="sunrise">
            Sunrise: @{
                // Converting unix date and time to human date and time and show only the time of sunrise
                String timesunrise;
                System.DateTime dtDateTimesunrise = new DateTime(1970, 1, 1);
                dtDateTimesunrise = dtDateTimesunrise.AddSeconds(response.sys.sunrise).ToLocalTime();
                timesunrise = dtDateTimesunrise.ToShortTimeString();
            }
            @timesunrise
    </div>
    <div id="sunset">
            Sunset: @{
                // Converting unix date and time to human date and time and show only the time of sunset
                String timesunset;
                System.DateTime dtDateTimesunset = new DateTime(1970, 1, 1);
                dtDateTimesunset = dtDateTimesunset.AddSeconds(response.sys.sunset).ToLocalTime();
                timesunset = dtDateTimesunset.ToShortTimeString();
            }
            @timesunset
    </div>
</body>
                }